<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarter</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="shortcut icon" href="assets/favicon.svg" type="image/svg+xml">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <header class="app-header">
        <div class="header-top">
            <div class="month-navigator">
                <button id="prev-month-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.7071 18.7071C15.3166 19.0976 14.6834 19.0976 14.2929 18.7071L8.29289 12.7071C7.90237 12.3166 7.90237 11.6834 8.29289 11.2929L14.2929 5.29289C14.6834 4.90237 15.3166 4.90237 15.7071 5.29289C16.0976 5.68342 16.0976 6.31658 15.7071 6.70711L10.4142 12L15.7071 17.2929C16.0976 17.6834 16.0976 18.3166 15.7071 18.7071Z" fill="currentColor"/>
                    </svg>
                </button>
                <h1 id="current-month-year"></h1>
                <button id="next-month-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.29289 5.29289C8.68342 4.90237 9.31658 4.90237 9.70711 5.29289L15.7071 11.2929C16.0976 11.6834 16.0976 12.3166 15.7071 12.7071L9.70711 18.7071C9.31658 19.0976 8.68342 19.0976 8.29289 18.7071C7.90237 18.3166 7.90237 17.6834 8.29289 17.2929L13.5858 12L8.29289 6.70711C7.90237 6.31658 7.90237 5.68342 8.29289 5.29289Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <button id="settings-btn" class="header-icon-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.669 3.33109C13.8831 3.11695 14.231 3.11695 14.4451 3.33109L15.555 4.441C15.9358 4.82184 16.5652 4.93305 17.056 4.69295L18.3348 4.10499C18.7033 3.9357 19.1558 4.03985 19.4135 4.36035L20.0865 5.13965C20.3442 5.46015 20.3163 5.92965 20.0288 6.21715L19.2215 7.0244C18.8915 7.35445 18.8313 7.88159 19.0714 8.27235L19.6593 9.55119C19.8286 9.91969 19.7245 10.3722 19.404 10.6299L18.6247 11.2929C18.3042 11.5506 17.8347 11.5785 17.5472 11.291L16.7399 10.4837C16.4099 10.1537 15.8827 10.0935 15.492 10.3336L14.2132 11.0216C13.8447 11.2309 13.3922 11.1268 13.1345 10.8063L12.4615 10.027C12.2038 9.7065 12.2317 9.237 12.5192 8.9495L13.3265 8.14225C13.6565 7.8122 13.7167 7.28506 13.4766 6.8943L12.8887 5.61546C12.7194 5.24696 12.8235 4.79446 13.144 4.53675L13.9233 3.87375C13.9326 3.8652 13.669 3.33109 13.669 3.33109ZM10.1174 13.1174C10.553 12.6818 11.247 12.6818 11.6826 13.1174L13.1174 14.5522C13.553 14.9878 13.553 15.6818 13.1174 16.1174C12.6818 16.553 11.9878 16.553 11.5522 16.1174L10.1174 14.6826C9.6818 14.247 9.6818 13.553 10.1174 13.1174Z" fill="currentColor"/>
                    <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
        <div class="header-bottom">
            <div class="main-balance">
                <span>Balance</span>
                <h2 id="balance-amount">$0.00</h2>
            </div>
            <div class="daily-budget">
                <span>Presupuesto diario</span>
                <p id="daily-budget-amount">$0.00</p>
            </div>
        </div>
    </header>

    <main class="app-main">
        <section class="charts-container">
            <div id="daily-flow-chart-wrapper" class="chart-wrapper">
                <canvas id="daily-flow-chart"></canvas>
            </div>
            <div id="category-expenses-chart-wrapper" class="chart-wrapper">
                <canvas id="category-expenses-chart"></canvas>
            </div>
        </section>

        <section class="transactions-list-container">
            <h3>Transacciones</h3>
            <ul id="transactions-list">
                <!-- Transactions will be injected here by JS -->
            </ul>
        </section>
    </main>

    <nav class="app-nav">
        <button id="add-transaction-btn" class="fab">+</button>
    </nav>

    <!-- Add/Edit Transaction Modal -->
    <div id="transaction-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <form id="transaction-form">
                <h3 id="transaction-modal-title">Nueva Transacción</h3>
                <input type="hidden" id="transaction-id">
                
                <div class="form-group">
                    <label for="transaction-type">Tipo</label>
                    <select id="transaction-type" required>
                        <option value="expense">Gasto</option>
                        <option value="income">Ingreso</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="transaction-amount">Monto</label>
                    <input type="number" id="transaction-amount" placeholder="0.00" required step="0.01">
                </div>

                <div class="form-group">
                    <label for="transaction-category">Categoría</label>
                    <select id="transaction-category" required></select>
                </div>

                <div class="form-group">
                    <label for="transaction-date">Fecha</label>
                    <input type="date" id="transaction-date" required>
                </div>

                <div class="form-group">
                    <label for="transaction-payment-method">Medio de Pago</label>
                    <input type="text" id="transaction-payment-method" placeholder="Ej: Tarjeta, Efectivo">
                </div>

                <div class="form-group">
                    <label for="transaction-details">Detalle</label>
                    <textarea id="transaction-details" rows="2"></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" id="delete-transaction-btn" class="btn-danger" style="display: none;">Eliminar</button>
                    <div style="flex-grow: 1;"></div>
                    <button type="button" id="cancel-transaction-btn">Cancelar</button>
                    <button type="submit">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Ajustes</h3>
            <div class="settings-options">
                <button id="manage-categories-btn" class="settings-btn">Gestionar Categorías</button>
                <button id="import-export-btn" class="settings-btn">Importar / Exportar</button>
            </div>
            <div class="form-actions">
                <button type="button" id="close-settings-modal-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Categories Modal -->
    <div id="categories-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Gestionar Categorías</h3>
            <div id="categories-list">
                <!-- Category list will be injected here -->
            </div>
            <form id="category-form">
                <input type="hidden" id="category-id">
                <div class="form-group">
                    <input type="text" id="category-name" placeholder="Nombre de la categoría" required>
                    <button type="submit" id="save-category-btn">Añadir</button>
                </div>
            </form>
            <div class="form-actions">
                <button type="button" id="close-categories-modal-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Import/Export Modal -->
    <div id="import-export-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Importar / Exportar</h3>
            <p>Realiza una copia de seguridad de tus datos o restáurala desde un archivo JSON.</p>
            <div class="form-actions">
                <button id="export-data-btn">Exportar a JSON</button>
                <label class="button-like-label" for="import-file-input">Importar desde JSON</label>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
            <div class="form-actions">
                <button type="button" id="close-import-export-modal-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
